<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI Audio Detector | Analyze</title>

<style>
:root {
    --primary: #6a11cb;
    --secondary: #2575fc;
    --bg-dark: #0f1020;
    --card-bg: rgba(255,255,255,0.08);
    --text-light: #f5f5f5;
}

* {
    box-sizing: border-box;
}

body {
    margin: 0;
    font-family: "Segoe UI", Arial, sans-serif;
    background: linear-gradient(135deg, #0f1020, #1b1d3c);
    color: var(--text-light);
    min-height: 100vh;
}

/* ---------- HEADER ---------- */
header {
    padding: 24px 40px;
    font-size: 22px;
    font-weight: bold;
    letter-spacing: 0.5px;
}

/* ---------- MAIN LAYOUT ---------- */
.main {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 40px;
    padding: 40px;
}

@media (max-width: 900px) {
    .main {
        grid-template-columns: 1fr;
    }
}

/* ---------- PANELS ---------- */
.panel {
    background: var(--card-bg);
    border-radius: 18px;
    padding: 35px;
    backdrop-filter: blur(12px);
    box-shadow: 0 20px 60px rgba(0,0,0,0.4);
    animation: fadeUp 0.8s ease forwards;
}

@keyframes fadeUp {
    from { opacity: 0; transform: translateY(30px); }
    to { opacity: 1; transform: translateY(0); }
}

.panel h2 {
    margin-top: 0;
    font-size: 26px;
}

/* ---------- UPLOAD ---------- */
input[type="file"] {
    width: 100%;
    padding: 14px;
    margin: 20px 0;
    border-radius: 10px;
    border: none;
}

button {
    width: 100%;
    padding: 14px;
    font-size: 16px;
    font-weight: bold;
    border-radius: 10px;
    border: none;
    cursor: pointer;
    background: linear-gradient(90deg, var(--primary), var(--secondary));
    color: white;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}

button:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(106,17,203,0.5);
}

/* ---------- RESULT ---------- */
#status {
    margin-top: 15px;
    opacity: 0.85;
}

.result-box {
    margin-top: 20px;
    display: none;
}

.result-title {
    font-size: 22px;
    margin-bottom: 12px;
}

/* ---------- CONFIDENCE BAR ---------- */
.bar {
    background: rgba(255,255,255,0.15);
    height: 18px;
    border-radius: 10px;
    overflow: hidden;
}

.bar-fill {
    height: 100%;
    width: 0%;
    background: linear-gradient(90deg, #00e0ff, #00ff88);
    transition: width 1.2s ease;
}

.explanation {
    margin-top: 15px;
    font-size: 15px;
    line-height: 1.5;
    opacity: 0.9;
}

/* ---------- FOOTER ---------- */
footer {
    text-align: center;
    padding: 25px;
    font-size: 13px;
    opacity: 0.6;
}
</style>
</head>

<body>

<header>üéß AI Audio Detection</header>

<div class="main">

    <!-- UPLOAD PANEL -->
    <div class="panel">
        <h2>Upload Audio</h2>
        <p>Select a voice sample (MP3 / WAV) to analyze.</p>

        <input type="file" id="audioFile" accept=".mp3,.wav">
        <button onclick="analyzeAudio()">Analyze Audio</button>

        <div id="status"></div>
    </div>

    <!-- RESULT PANEL -->
    <div class="panel">
        <h2>Analysis Result</h2>

        <div id="resultBox" class="result-box">
            <div class="result-title" id="predictionText"></div>

            <div class="bar">
                <div class="bar-fill" id="confidenceBar"></div>
            </div>

            <div class="explanation" id="explanationText"></div>
        </div>
    </div>

</div>

<footer>
    ¬© 2026 AI Voice Detector | Hackathon Project
</footer>

<script>
async function analyzeAudio() {
    const fileInput = document.getElementById("audioFile");
    const status = document.getElementById("status");
    const resultBox = document.getElementById("resultBox");
    const predictionText = document.getElementById("predictionText");
    const confidenceBar = document.getElementById("confidenceBar");
    const explanationText = document.getElementById("explanationText");

    if (!fileInput.files.length) {
        alert("Please select an audio file");
        return;
    }

    status.innerText = "üîç Analyzing audio...";
    resultBox.style.display = "none";
    confidenceBar.style.width = "0%";

    const formData = new FormData();
    formData.append("file", fileInput.files[0]);

    try {
        const response = await fetch(
            "https://ai-voice-detector-8hwk.onrender.com/v1/detect-voice",
            {
                method: "POST",
                headers: {
                    "Authorization": "Bearer hackathon_test_key_123"
                },
                body: formData
            }
        );

        const data = await response.json();
        if (!response.ok) throw new Error(data.detail);

        resultBox.style.display = "block";
        predictionText.innerText =
            `Prediction: ${data.prediction.toUpperCase()}`;

        // Animate confidence
        setTimeout(() => {
            confidenceBar.style.width = (data.confidence * 100).toFixed(1) + "%";
        }, 200);

        explanationText.innerText = data.explanation;
        status.innerText = "‚úÖ Analysis complete";

    } catch (err) {
        status.innerText = "‚ùå Failed to analyze audio";
        console.error(err);
    }
}
</script>

</body>
</html>
